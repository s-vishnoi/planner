*{box-sizing:border-box}
:root{
  --highlight-gray:#bcbcbc;
}
body{
  font-family: system-ui, -apple-system, Segoe UI, sans-serif;
  background:#f2f2f2;
  padding:20px;
  color:#222;
}
.container{max-width:1600px;margin:auto}
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:14px;
}
h1{font-size:2.2em}
#monthTitle{
  font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Segoe UI",sans-serif;
  color:#666;
}
.top-controls{display:flex;gap:8px;align-items:center}
.cloud-btn{
  color:#888;
  border-radius:6px;
  font-size:30px;
  background:transparent;
  border-color:transparent;
  width:auto;
  height:auto;
  line-height:1;
  display:flex;
  align-items:center;
  justify-content:center;
}
.cloud-btn.on{
  color:#2f6fec;
  border-color:transparent;
}
.cloud-link{
  border:none;
  background:transparent;
  color:#333;
  cursor:pointer;
  font-size:12px;
  padding:0 4px;
}
.restore-btn{
  border:1px solid #ccc;
  background:#fff;
  border-radius:50%;
  width:28px;
  height:28px;
  cursor:pointer;
  padding:0;
  line-height:1;
}
select,button{
  padding:8px 10px;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:#111;
  color:#fff;
  border:none;
  cursor:pointer;
}
.layout{
  display:flex;
  gap:16px;
}
.left-col{
  display:flex;
  flex-direction:column;
  gap:16px;
  flex:1;
  min-width:0;
}
.table-wrap{
  overflow-x:auto;
  background:#f2f2f2;
  border-radius:12px;
  border:1px solid #ddd;
  flex:1;
}
table{
  border-collapse:collapse;
  width:100%;
  min-width:1100px;
}
th,td{
  border:1px solid #ddd;
  text-align:center;
  padding:4px;
  font-size:12px;
  background:#f2f2f2;
  color:#222;
}
td.pct-bad{background:#f6c3c3}
td.pct-warn{background:#f8e1b2}
td.pct-good{background:#cfe7cf}
th{
  font-weight:600;
}
.day-cell{
  cursor:pointer;
  background:#f7f7f7;
  border:1px solid #d6d6d6;
  box-shadow:0 1px 0 rgba(0,0,0,.08);
  position:relative;
}
.day-cell::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:var(--dream-corner, none),var(--journal-corner, none),var(--grateful-corner, none);
  background-repeat:no-repeat;
  background-size:8px 8px;
  background-position:bottom left,top left,top right;
  pointer-events:none;
}
.day-cell.today-mark{
  background:#4f4f4f;
  border-color:#3b3b3b;
  color:#fff;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.7),0 1px 0 rgba(0,0,0,.08);
}
.day-cell.dream-mark{
  --dream-corner:linear-gradient(45deg,rgba(183,155,244,.55) 0 70%,transparent 70%);
}
.day-cell.journal-mark{
  --journal-corner:linear-gradient(135deg,rgba(126,182,255,.55) 0 70%,transparent 70%);
}
.day-cell.grateful-mark{
  background-color:#f7f7f7;
  border-color:#d6d6d6;
}
.day-cell.grateful-mark{
  --grateful-corner:linear-gradient(225deg,rgba(231,216,163,.7) 0 70%,transparent 70%);
}
.day-cell.today-mark,
.day-cell.today-mark.dream-mark,
.day-cell.today-mark.journal-mark,
.day-cell.today-mark.grateful-mark,
.day-cell.today-mark.dream-mark.journal-mark{
  background:#4f4f4f;
  border-color:#3b3b3b;
  color:#fff;
}
.day-cell:hover{
  background:#f0f0f0;
}
.day-cell.selected{
  background:#e2e2e2;
  color:#111;
  border-color:#c7c7c7;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6),0 2px 0 rgba(0,0,0,.12);
}
.day-cell.today-mark.selected{
  background:#4f4f4f;
  border-color:#3b3b3b;
  color:#fff;
}
th.habit-col,td.habit-col{
  text-align:left;
  padding-left:8px;
  min-width:180px;
  position:sticky;
  left:0;
  z-index:3;
}
td.habit-col{
  font-weight:600;
  cursor:grab;
}
.habit-name{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.habit-wrap{
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.edit{
  cursor:pointer;
  opacity:.6;
}
.edit:hover{opacity:1}
.icon-col{
  width:44px;
  background:#fff;
}
.checkbox{
  width:14px;
  height:14px;
  border:1px solid #555;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
}
.checkbox.checked{background:#73c173}
.checkbox.checked-yellow{
  background:#ffd88a;
  border-color:#d1a957;
}
.checkbox.checked::after{
  content:"✓";
  color:#fff;
  font-size:10px;
  line-height:1;
}
.checkbox.checked-yellow::after{
  content:"✓";
  color:#6a4b00;
  font-size:10px;
  line-height:1;
}
.goal-input{
  width:42px;
  font-size:11px;
}
.weekday{
  font-size:11px;
  color:#444;
}
.weekday.sun{background:#ffecec}
.weekday.mon{background:#fff6e0}
.weekday.tue{background:#f1ffe8}
.weekday.wed{background:#e8f6ff}
.weekday.thu{background:#efe8ff}
.weekday.fri{background:#ffe8f3}
.weekday.sat{background:#f3f3f3}
.side-notes{
  display:flex;
  flex-direction:column;
  gap:12px;
}
.bottom-cards{
  display:flex;
  gap:12px;
}
.mini-card{
  flex:1;
  background:#f6f6f6;
  border:1px solid rgba(0,0,0,.15);
  border-radius:12px;
  padding:10px;
  box-shadow:2px 2px 6px rgba(0,0,0,.08);
}
.mini-card h3{
  margin:0 0 6px;
  font-size:14px;
  font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Segoe UI",sans-serif;
  color:#666;
}
.mini-card .note-edit{
  width:100%;
  min-height:190px;
  border:none;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent 18px,
      rgba(0,0,0,.08) 19px
    );
  resize:none;
  outline:none;
  font-size:12px;
  line-height:19px;
  padding:0 2px;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
  font-weight:300;
  color:#444;
  white-space:pre-wrap;
}
.goals-card{background:#f4fff3}
.excited-card{background:#fff6e6}
.grateful-card{background:#eef3ff}

.cloud-modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
}
.cloud-modal.show{
  display:flex;
}
.cloud-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.cloud-card{
  position:relative;
  z-index:1;
  background:#fff;
  border-radius:12px;
  border:1px solid rgba(0,0,0,.2);
  padding:14px;
  width:min(360px,92vw);
  box-shadow:0 16px 40px rgba(0,0,0,.18);
  display:flex;
  flex-direction:column;
  gap:10px;
}
.cloud-card label{
  font-size:12px;
  display:flex;
  flex-direction:column;
  gap:4px;
}
.cloud-card input{
  padding:6px 8px;
  border-radius:6px;
  border:1px solid #ccc;
}
.cloud-actions{
  display:flex;
  gap:8px;
  justify-content:flex-end;
}
.dream-modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:110;
}
.dream-modal.show{
  display:flex;
}
.dream-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.dream-card{
  position:relative;
  z-index:1;
  background:#fff7fb;
  border-radius:18px;
  border:1px solid #f0b6d2;
  padding:14px;
  width:min(420px,92vw);
  box-shadow:0 18px 40px rgba(203,93,151,.25);
  display:flex;
  flex-direction:column;
  gap:10px;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
}
.dream-card h3{
  margin:0;
  font-size:18px;
  color:#c0598d;
  letter-spacing:.2px;
}
.dream-card .modal-edit{
  width:100%;
  min-height:160px;
  border:1px solid #f0b6d2;
  border-radius:12px;
  padding:8px;
  font-size:14px;
  background:#fff;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
  white-space:pre-wrap;
  outline:none;
}
.dream-actions{
  display:flex;
  justify-content:flex-end;
}
.dream-actions button{
  background:#f08bb6;
  color:#fff;
}
.dream-actions button:hover{
  background:#e77faa;
}
.journal-modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:110;
}
.journal-modal.show{
  display:flex;
}
.journal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.journal-card{
  position:relative;
  z-index:1;
  background:#f4fff9;
  border-radius:18px;
  border:1px solid #b9e7cf;
  padding:14px;
  width:min(420px,92vw);
  box-shadow:0 18px 40px rgba(90,176,136,.25);
  display:flex;
  flex-direction:column;
  gap:10px;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
}
.journal-card h3{
  margin:0;
  font-size:18px;
  color:#3c9b6a;
  letter-spacing:.2px;
}
.journal-card .modal-edit{
  width:100%;
  min-height:160px;
  border:1px solid #b9e7cf;
  border-radius:12px;
  padding:8px;
  font-size:14px;
  background:#fff;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
  white-space:pre-wrap;
  outline:none;
}
.journal-actions{
  display:flex;
  justify-content:flex-end;
}
.journal-actions button{
  background:#6ec79a;
  color:#fff;
}
.journal-actions button:hover{
  background:#5fba8c;
}
.grateful-modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:110;
}
.grateful-modal.show{
  display:flex;
}
.grateful-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.grateful-modal-card{
  position:relative;
  z-index:1;
  background:#fff7dd;
  border-radius:18px;
  border:1px solid #f0d28a;
  padding:14px;
  width:min(420px,92vw);
  box-shadow:0 18px 40px rgba(198,163,83,.22);
  display:flex;
  flex-direction:column;
  gap:10px;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
}
.grateful-modal-card h3{
  margin:0;
  font-size:18px;
  color:#b27a17;
  letter-spacing:.2px;
}
.grateful-list{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.grateful-modal-card .grateful-input{
  width:100%;
  min-height:34px;
  border:1px solid #f0d28a;
  border-radius:12px;
  padding:8px;
  font-size:14px;
  background:#fff;
  font-family:"Comic Sans MS","Comic Sans","Chalkboard SE","Marker Felt",cursive;
  outline:none;
  white-space:pre-wrap;
}
.grateful-actions{
  display:flex;
  justify-content:flex-end;
}
.grateful-actions button{
  background:#f0c35a;
  color:#111;
}
.grateful-actions button:hover{
  background:#e7b44a;
}
.habit-modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:110;
}
.habit-modal.show{
  display:flex;
}
.habit-backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
}
.habit-card{
  position:relative;
  z-index:1;
  background:#fffdf6;
  border-radius:18px;
  border:1px solid #f0d8a6;
  padding:16px;
  width:min(380px,92vw);
  box-shadow:0 18px 40px rgba(196,153,69,.22);
  display:flex;
  flex-direction:column;
  gap:10px;
  font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Segoe UI",sans-serif;
}
.habit-card h3{
  margin:0;
  font-size:18px;
  color:#b07412;
  letter-spacing:.2px;
}
.habit-label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:12px;
  color:#5a4a2b;
}
.habit-card input{
  padding:8px 10px;
  border-radius:10px;
  border:1px solid #f0d8a6;
  background:#fff;
  font-size:13px;
}
.habit-actions{
  display:flex;
  justify-content:flex-end;
  gap:8px;
}
.habit-actions button{
  background:#f0c56a;
  color:#111;
}
.habit-actions button:hover{
  background:#e6b84f;
}
.habit-actions button.danger{
  background:#e27b5b;
  color:#fff;
}
.habit-actions button.danger:hover{
  background:#d76845;
}
.sticky-note{
  width:260px;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(0,0,0,.15);
  box-shadow:2px 2px 6px rgba(0,0,0,.1);
  position:sticky;
}
.daily-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin:6px 0 10px;
  font-size:12px;
}
.today-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:1px;
}
.daily-nav{
  display:flex;
  gap:6px;
}
.nav-btn{
  padding:4px 8px;
  font-size:11px;
  border-radius:6px;
  border:1px solid #b7b7b7;
  background:#fff;
  color:#111;
  cursor:pointer;
}
.daily-list{
  display:flex;
  flex-direction:column;
  gap:8px;
  height:200px;
}
.mood-row{
  display:flex;
  gap:3px;
  margin:1px 0 2px;
  flex-wrap:wrap;
}
.dreams-row{
  display:flex;
  gap:6px;
  margin:1px 0 6px;
}
.dreams-btn{
  padding:6px 10px;
  font-size:12px;
  border-radius:8px;
  border:1px solid #d3b5f0;
  background:#f1e4fb;
  color:#111;
  cursor:pointer;
}
.dreams-btn:hover{
  background:#ead7f8;
}
.journal-btn{
  padding:6px 10px;
  font-size:12px;
  border-radius:8px;
  border:1px solid #c7d5f0;
  background:#e7f0ff;
  color:#111;
  cursor:pointer;
}
.journal-btn:hover{
  background:#dbe9ff;
}
.grateful-btn{
  padding:6px 10px;
  font-size:12px;
  border-radius:8px;
  border:1px solid #e7d29a;
  background:#fbf0c9;
  color:#111;
  cursor:pointer;
}
.grateful-btn:hover{
  background:#f6e4b1;
}
.mood-btn{
  border:1px solid #ccc;
  background:#f7f7f7;
  border-radius:8px;
  padding:3px 5px;
  cursor:pointer;
  font-size:14px;
  line-height:1;
  opacity:.7;
  box-shadow:0 1px 0 rgba(0,0,0,.1);
}
.mood-btn.selected{
  border-color:var(--highlight-gray);
  background:#ffd88a;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.6),0 2px 0 rgba(0,0,0,.1);
  opacity:1;
}
.today-heading{
  margin:0 0 2px;
  font-size:15px;
  font-weight:800;
  letter-spacing:.2px;
  color:#222;
  background:#fff7d1;
  display:inline-block;
  padding:4px 8px;
  border-radius:8px;
  border:1px solid #e7d28f;
}
.todo-line{
  display:flex;
  align-items:center;
  gap:8px;
}
.todo-check{
  width:22px;
  height:22px;
  border-radius:6px;
  border:1px solid #222;
  background:#fff;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  line-height:1;
  opacity:.4;
}
.todo-check.checked{
  background:#000;
  color:#fff;
  opacity:1;
}
.todo-check.checked::after{
  content:"✓";
  color:#fff;
  font-size:13px;
  line-height:1;
}
.sticky-note.yellow .todo-check.checked{
  background:#e2cf8b;
}
.sticky-note.pink .todo-check.checked{
  background:#e7b6c9;
}
.todo-input{
  flex:1;
  border:none;
  border-bottom:1px solid rgba(0,0,0,.15);
  background:transparent;
  font-size:12px;
  padding:2px 0;
  outline:none;
  min-height:18px;
  white-space:pre-wrap;
}
.todo-input::placeholder{
  color:rgba(0,0,0,.22);
}
.sticky-note.yellow{
  background:#fff7c2;
  border-color:#e5d98c;
  top:20px;
}
.sticky-note.pink{
  background:#ffe3ee;
  border-color:#f2b6cd;
  top:320px;
}
.events-list{
  display:flex;
  flex-direction:column;
  gap:8px;
  height:100px;
}
.sticky-note textarea{
  width:100%;
  height:200px;
  border:none;
  background:transparent;
  resize:none;
  outline:none;
  font-size:13px;
}

[contenteditable="true"]:empty:before{
  content:attr(data-placeholder);
  color:rgba(0,0,0,.3);
  pointer-events:none;
}

.context-menu{
  position:fixed;
  display:none;
  z-index:200;
  background:#fff;
  border:1px solid #cfcfcf;
  border-radius:10px;
  padding:6px;
  box-shadow:0 10px 24px rgba(0,0,0,.16);
  min-width:180px;
}
.context-menu.show{
  display:block;
}
.context-menu button{
  width:100%;
  padding:8px 10px;
  border:none;
  background:transparent;
  text-align:left;
  font-size:12px;
  color:#111;
  cursor:pointer;
  border-radius:8px;
}
.context-menu button:not(.color-chip):hover{
  background:#f2f2f2;
}
.context-row{
  display:flex;
  gap:6px;
  padding:6px 8px 4px;
}
.color-chip{
  width:18px;
  height:18px;
  padding:0;
  border-radius:50%;
  border:1px solid rgba(0,0,0,.2);
  background:#111;
  cursor:pointer;
}
.emoji-btn{
  width:26px;
  height:26px;
  padding:0;
  border-radius:8px;
  border:1px solid rgba(0,0,0,.12);
  background:#fff;
  font-size:16px;
  line-height:1;
  text-align:center;
}
.emoji-btn:hover{
  background:#f4f4f4;
}
.color-chip[data-color="#b33a3a"]{background:#b33a3a}
.color-chip[data-color="#2e7d5b"]{background:#2e7d5b}
.color-chip[data-color="#2f6fec"]{background:#2f6fec}
.color-chip[data-color="#b86a16"]{background:#b86a16}
.color-chip[data-color="#d4a017"]{background:#d4a017}
